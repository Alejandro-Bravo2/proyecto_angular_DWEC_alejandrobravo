<main class="checkout">
  <article class="checkout__container">
    <!-- Header -->
    <header class="checkout__header">
      <h1 class="checkout__title">Finalizar compra</h1>
      <nav class="checkout__steps" aria-label="Pasos del checkout">
        <span
          class="checkout__step"
          [class.checkout__step--active]="store.currentStep() === 'summary'"
          [class.checkout__step--completed]="store.currentStep() === 'payment' || store.currentStep() === 'success'"
        >
          1. Resumen
        </span>
        <span class="checkout__step-divider"></span>
        <span
          class="checkout__step"
          [class.checkout__step--active]="store.currentStep() === 'payment'"
          [class.checkout__step--completed]="store.currentStep() === 'success'"
        >
          2. Pago
        </span>
        <span class="checkout__step-divider"></span>
        <span
          class="checkout__step"
          [class.checkout__step--active]="store.currentStep() === 'success'"
        >
          3. Confirmacion
        </span>
      </nav>
    </header>

    <!-- Content -->
    <section class="checkout__content">
      @switch (store.currentStep()) {
        @case ('summary') {
          <app-plan-summary
            [planInfo]="store.planInfo()"
            (continuar)="onProceedToPayment()"
          />
        }

        @case ('payment') {
          <app-payment-form
            [planInfo]="store.planInfo()"
            (volver)="onBackToSummary()"
          />
        }

        @case ('success') {
          <app-payment-success
            [response]="store.response()"
            [planInfo]="store.planInfo()"
            (irAlDashboard)="onGoToDashboard()"
          />
        }
      }
    </section>

    <!-- Security Badge -->
    <footer class="checkout__footer">
      <figure class="checkout__security">
        <svg class="checkout__security-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        <figcaption class="checkout__security-text">
          Conexion segura SSL. Pago simulado - no se realizan cargos reales.
        </figcaption>
      </figure>
    </footer>
  </article>
</main>
