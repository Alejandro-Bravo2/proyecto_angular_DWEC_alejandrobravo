<section class="daily-menu" tabindex="0" role="region" aria-label="Menú diario">
  <nav class="daily-menu__nav" aria-label="Navegación de fechas">
    <button
      type="button"
      class="daily-menu__nav-btn"
      (click)="previousDay()"
      aria-label="Ir al día anterior"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="m15 18-6-6 6-6" />
      </svg>
    </button>

    <div class="daily-menu__date">
      <h2 class="daily-menu__date-text" aria-live="polite">{{ formattedDate() }}</h2>
      <input
        type="date"
        [value]="currentDate()"
        (change)="onDateInputChange($event)"
        class="daily-menu__date-input"
        aria-label="Seleccionar fecha"
      />
    </div>

    <button
      type="button"
      class="daily-menu__nav-btn"
      (click)="nextDay()"
      aria-label="Ir al día siguiente"
    >
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="m9 18 6-6-6-6" />
      </svg>
    </button>
  </nav>

  @if (!isToday()) {
    <button type="button" class="daily-menu__today" (click)="goToToday()">
      Volver a hoy
    </button>
  }

  @if (dailyNutrition(); as nutrition) {
    <div class="daily-menu__grid" role="list">
      @for (meal of nutrition.meals; track trackByMealId($index, meal)) {
        <app-meal-section
          [title]="getMealLabel(meal.mealType)"
          [foods]="meal.foods"
          [mealId]="meal.id"
        />
      }
    </div>
  } @else {
    <article class="daily-menu__empty" role="status">
      <p>Sin datos para esta fecha</p>
    </article>
  }
</section>