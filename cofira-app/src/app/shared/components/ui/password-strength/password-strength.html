@if (password()) {
  <aside class="c-password-strength" role="status" aria-label="Indicador de fortaleza de contraseña">
    <meter
      class="c-password-strength__bar"
      min="0"
      max="4"
      [value]="strength()"
      aria-label="Fortaleza de la contraseña"
    >
      @for (level of [1, 2, 3, 4]; track level) {
        <span
          class="c-password-strength__segment"
          [class.c-password-strength__segment--active]="strength() >= level"
          [class.c-password-strength__segment--weak]="strength() === 1 && strength() >= level"
          [class.c-password-strength__segment--fair]="strength() === 2 && strength() >= level"
          [class.c-password-strength__segment--good]="strength() === 3 && strength() >= level"
          [class.c-password-strength__segment--strong]="strength() === 4 && strength() >= level"
          aria-hidden="true"
        ></span>
      }
    </meter>

    <section class="c-password-strength__feedback">
      <p class="c-password-strength__label" [class]="labelClass()">
        {{ strengthLabel() }}
      </p>

      @if (showRequirements()) {
        <ul class="c-password-strength__requirements">
          <li [class.c-password-strength__requirement--met]="hasMinLength()">
            <span aria-hidden="true">{{ hasMinLength() ? '✓' : '○' }}</span>
            Al menos 12 caracteres
          </li>
          <li [class.c-password-strength__requirement--met]="hasUpperLower()">
            <span aria-hidden="true">{{ hasUpperLower() ? '✓' : '○' }}</span>
            Mayúsculas y minúsculas
          </li>
          <li [class.c-password-strength__requirement--met]="hasNumber()">
            <span aria-hidden="true">{{ hasNumber() ? '✓' : '○' }}</span>
            Al menos un número
          </li>
          <li [class.c-password-strength__requirement--met]="hasSpecialChar()">
            <span aria-hidden="true">{{ hasSpecialChar() ? '✓' : '○' }}</span>
            Al menos un símbolo especial
          </li>
        </ul>
      }
    </section>
  </aside>
}
